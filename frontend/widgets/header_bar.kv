<HeaderBar>:
    size_hint_y: None
    height: "60dp"
    padding: "10dp"
    spacing: "10dp"
    orientation: "horizontal"

    canvas.before:
        Color:
            rgba: BG_COLOR
        Rectangle:
            pos: self.pos
            size: self.size

    # ---------- BACK BUTTON ----------
    Button:
        text: "<"
        size_hint_x: None
        width: "50dp"
        background_normal: ""
        background_color: CARD_COLOR
        color: TEXT_COLOR
        opacity: 1 if root.show_back else 0
        disabled: not root.show_back
        on_release:
            app.root.current = "routes" if root.show_back else None

    # ---------- TITLE ----------
    HeaderLabel:
        text: root.title
        halign: "center"
        valign: "middle"
        text_size: self.size

    # ---------- RIGHT ACTION BUTTON ----------
    Button:
        size_hint_x: None
        width: "50dp"
        background_normal: ""
        background_color: CARD_COLOR
        color: TEXT_COLOR
        opacity: 1 if root.right_icon else 0
        disabled: not root.right_icon
        on_release:
            root.on_right_press() if root.on_right_press else None

        Image:
            source: root.right_icon
            size_hint: None, None
            size: "24dp", "24dp"
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
